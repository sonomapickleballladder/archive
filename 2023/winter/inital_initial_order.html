<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Initial Version of Initial Order</title>
    <script src="js/supabase-js.js"></script>
    <script src="js/lzstring.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/round.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <center>
        <h1>Initial Version of Initial Order</h1>
    </center>

   
    <div class="h" style="display: none;">
        <section id="signin">

            <h2>Sign in:</h2>  
            <p> Sign in below with your name and secret key to be able to edit your position in the order. (Note: you can populate the name input field by clicking on your name where it appears in the order).</p>
        
            <input type="text" id="name" value="" placeholder="Your first and last name">
            <input type="text" name="" id="skey" placeholder="Your secret key">
        
            <button onclick="checkid(); getrankings()" id="login">Sign In</button>
    
        </section>
    
       
    
        <h2>Actions:</h2>
        
        <button onclick="getrankings();">ðŸ”„ Refresh Order</button> <button onclick="savethisorder();">ðŸ’¾ Save Order</button>
       
    </div>

    <h2>Order based on average Rating:</h2>

    <ol id="order">
        <br>
        <div class="bigger loader"></div>
        <br>
    </ol>

    <hr>
    
    <p>
    This foundational initial order is just a ranked list based on the average of all the ratings each player submitted when signing up. Wherever there were multiple players with the same average rating, they were sorted based on when they signed up.
    </p>
    <p>Note: DUPR ratings are displayed next to every player who provided one, as they are public information anyway. Other rating types are not displayed, as some people may not want them to be shared.</p>

   
    <script>
        window.onload = function() {
    lsWarning();

    getrankings();
}

function getrankings() {
    ptc('rankings', '*').then(function(res){
        //console.log(res);
        //console.log(res[res.length-1])
        

        for (let i = 0; i < res.length; i++) {
            bnsuawe.push(res[i].mwbn);
            wnieai.push(parseInt(res[i].id));
        }

        //
      //console.log(Math.min(...wnieai));
        awMisen = res.filter(obj => {
            return obj.id === Math.min(...wnieai)
          });

          //console.log(awMisen);

        wbicewom = res.filter(obj => {
            return obj.id === Math.max(...wnieai)
          });
       awMisen=awMisen[0];
       wbicewom=wbicewom[0]
          //console.log(wbicewom);

          let plr = awMisen.order.split(',');

        renderorder(wbicewom, plr);

    

        
    })
}

function renderorder(al, ord) {
    byId('order').innerHTML = '';
    let sefrasaet={ "Theo MacKinnon": 5, "Ryan Diaz": 4.99, "Will Mackinnon": 4.95, "Adam MacKinnon": 4.93, "Benjamin Grant": 4.67, "Jonathan Doughtie": null, "Michael Hischak": 4.39, "Kevin Cole": 4.3, "Larry Pack": 4.29, "Dave Beal": null, "Marty Cassity": null, "Theresa Della Lana": null, "Christopher Rosales": 4.08, "Kevin Bonner": 4.05, "Dan Gould": 3.97, "Mark Wells": null, "Scott Doughtie": null, "Duncan Rowley": null, "Tamara Baganz": 3.75, "Debi Pope": 3.75, "Rob Becker": null, "Linda Hoffman": 3.7, "Carol Muller": 3.65, "Dorothy Lampi": 3.63, "Tony Rossi": 3.63, "Jim Gray": null, "Sonny Hogg": 3.6, "Scott Ding": 3.66, "Jeffrey Muller": null, "Laura Larrecou": null, "Stephanie Brown": null, "Vickie Steffen": null, "Satish Vammi": null, "Rick Saal": null, "Seth Shepard": null, "Grant Barnes": null, "Joe Marshall": null, "John Gordon": 3.47, "Tom Lynn": 3.46, "Daniel Reynolds": 3.45, "John Daly": null, "Kirsten Shepard": null, "Tricia Shindledecker": null, "Paul Freitas": null, "Shannon Utter": 2.98, "KACY KOHUT": 3.04, "Valerie Rumrill": null, "wendy Dunn": null, "denise lambrecht": null, "Rebecca White": null, "robin guptill": null, "Sheldon Freisinger": null, "Mary Jo Renzi": null, "Valori Cohen": null, "Ana Anzore": null, "Shauna Harbarth": null, "Barbara Golden": null, "Kenneth Pischer": null, "Barbra Boyd": null, "Mary Price": 2.96, "Susanne Lake": 2.95, "Julie Hogg": 2.86, "Eileen Freiburger": null, "Peggy Berglund": null, "Richard Groh": null}
    try{byId('goup').removeAttribute('id');byId('godown').removeAttribute('id');}catch(ex){}
    let orord = awMisen.order.split(',');
    let name = byId('name').value;
    for (let i = 0; i < ord.length; i++) {
        let orind = orord.indexOf(ord[i]);
       // let controls = "";
       // if(name.toLowerCase().trim()==ord[i].toLowerCase().trim() && checkid()[1]) {controls= `&nbsp;<button id="goup" onclick="moveUp(this.parentNode,${i+1},${orind+1})">Up &uarr;</button>&nbsp;<button id="godown" onclick="moveDown(this.parentNode,${i+1},${orind+1})">Down &darr;</button>`;}
       let dpel = 'small';
        let duprn = `<${dpel}></${dpel}>`;
        if(sefrasaet[ord[i]]) {duprn=`<${dpel}> â€“â€“ ${sefrasaet[ord[i]].toFixed(2)}</${dpel} >`}
        byId('order').innerHTML+=`<li><span>${ord[i]}</span>${duprn}</li>`;
     }


    
}

let wbicewom, awMisen, bnsuawe = [], wnieai = [];

async function ptc(t,s,e,m,x,z,thenfunction){
    const { data, error } = await sb.client
    .from(t)
    .select(s)
  
  
  if(error&&debug) console.log(error);
  
  try{executeFunctionByName(thenfunction, window, data);}catch(ex){return data}
  
  
  //return data
  
    
  }









    </script>
<script src="js/plausible.js"></script>
</body>
</html>